apply plugin: 'com.android.library'
apply plugin: 'kotlin-android'


android {
    compileSdkVersion versions.compileSdk

    defaultConfig {
        minSdkVersion versions.minSdk
        testInstrumentationRunner names.testInstrumentationRunner
        targetSdkVersion  versions.targetSdk
        versionCode versions.versionCode as Integer
        versionName versions.versionName
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
            consumerProguardFiles 'proguard-rules.pro'
        }
    }

    lintOptions {
        abortOnError true
        absolutePaths false
        lintConfig rootProject.file("lint.xml")
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }

    testOptions {
        unitTests {
            includeAndroidResources = true
        }
    }


    libraryVariants.all {
        // replace with https://issuetracker.google.com/issues/72050365 once released.
        it.generateBuildConfig.enabled = false
    }
}

dependencies {
    implementation "com.android.support:appcompat-v7:${versions.appcompat}"
    api project(':retroauth')

    testImplementation "junit:junit:${versions.junit}"
    testImplementation "org.robolectric:robolectric:${versions.robolectric}"
    testImplementation "org.mockito:mockito-core:${versions.mochitoCore}"

    androidTestImplementation "org.mockito:mockito-android:${versions.mochitoAndroid}"
    androidTestImplementation "com.android.support.test:runner:${versions.testRunner}"
    androidTestImplementation "com.android.support.test:rules:${versions.testRules}"

}
apply plugin: 'com.getkeepsafe.dexcount'
apply plugin: 'com.github.ben-manes.versions'
apply from: rootProject.file('gradle/publish.gradle')
